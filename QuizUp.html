<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuizUp - Gamified Learning</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #020617;
            background-image: radial-gradient(circle at top left, rgba(30, 64, 175, 0.25), transparent 40%),
                              radial-gradient(circle at bottom right, rgba(16, 185, 129, 0.15), transparent 50%);
            color: #e2e8f0; /* slate-200 */
        }
        .duo-title {
            font-weight: 900; /* Black weight */
            color: #f1f5f9; /* slate-100 */
        }
        .duo-card {
            background-color: rgba(30, 41, 59, 0.6); /* slate-800 with opacity */
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(100, 116, 139, 0.3); /* slate-500 with opacity */
            border-radius: 1.5rem;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .duo-card:hover {
            box-shadow: 0 0 25px rgba(52, 211, 153, 0.2); /* emerald-400 */
        }
        .duo-btn {
            border-radius: 0.75rem;
            font-weight: 800;
            text-transform: uppercase;
            padding: 0.75rem 1.5rem;
            border-bottom-width: 4px;
            transition: all 0.15s ease-out;
            cursor: pointer;
        }
        .duo-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .duo-btn:active:not(:disabled) {
            transform: translateY(2px);
            border-bottom-width: 2px;
        }
        .btn-green {
            background-color: #10b981; /* emerald-500 */
            color: white;
            border-color: #047857; /* emerald-700 */
            box-shadow: 0 4px #047857;
        }
        .btn-green:hover:not(:disabled) { background-color: #059669; } /* emerald-600 */
        
        .btn-blue {
            background-color: #4b5563; /* gray-600 */
            color: white;
            border-color: #1f2937; /* gray-800 */
            box-shadow: 0 4px #1f2937;
        }
        .btn-blue:hover:not(:disabled) { background-color: #374151; } /* gray-700 */

        .btn-yellow {
            background-color: #f59e0b; /* amber-500 */
            color: white;
            border-color: #b45309; /* amber-700 */
            box-shadow: 0 4px #b45309;
        }
        .btn-yellow:hover:not(:disabled) { background-color: #d97706; } /* amber-600 */

        .btn-option {
            background-color: #334155; /* slate-700 */
            color: #e2e8f0; /* slate-200 */
            border: 1px solid #475569; /* slate-600 */
            border-bottom: 4px solid #475569;
            box-shadow: 0 4px #475569;
            transition: all 0.2s ease;
        }
        .btn-option:hover:not(:disabled) {
            background-color: #475569; /* slate-600 */
            transform: translateY(-2px);
            box-shadow: 0 6px #475569;
        }
        .btn-option:disabled { cursor: not-allowed; }
        
        .correct {
            background-color: #10b981 !important; /* emerald-500 */
            color: white !important;
            border-color: #047857 !important; /* emerald-700 */
            box-shadow: 0 4px #047857 !important;
        }
        .incorrect {
            background-color: #ef4444 !important; /* red-500 */
            color: white !important;
            border-color: #b91c1c !important; /* red-700 */
            box-shadow: 0 4px #b91c1c !important;
        }
        
        @keyframes pulse {
            50% { transform: scale(1.03); box-shadow: 0 0 20px rgba(52, 211, 153, 0.4); }
        }
        @keyframes shake {
            10%, 90% { transform: translateX(-2px); }
            20%, 80% { transform: translateX(4px); }
            30%, 50%, 70% { transform: translateX(-6px); }
            40%, 60% { transform: translateX(6px); }
        }
        .animate-pulse { animation: pulse 0.5s ease-in-out; }
        .animate-shake { animation: shake 0.5s ease-in-out; }
    </style>
</head>
<body class="min-h-screen p-4 pt-24">
    
    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-40 bg-slate-900/50 backdrop-filter backdrop-blur-lg border-b border-slate-800">
        <div class="max-w-5xl mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <div class="flex-shrink-0 flex items-center">
                    <svg class="h-8 w-8 text-emerald-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 2a4.5 4.5 0 0 0-4.5 4.5v0a4.5 4.5 0 0 0-3.4 4.1C2.3 16.5 6 22 12 22s9.7-5.5 7.9-11.4A4.5 4.5 0 0 0 16.5 6.5v0A4.5 4.5 0 0 0 12 2Z"></path>
                        <path d="M12 13a2.5 2.5 0 0 0 2.5-2.5V8.5a2.5 2.5 0 0 0-5 0v2a2.5 2.5 0 0 0 2.5 2.5Z"></path>
                        <path d="M12 22V19"></path>
                        <path d="M12 13H9"></path>
                        <path d="M15 13H12"></path>
                        <path d="M17.5 10.5c.3.9.5 1.9.5 3"></path>
                        <path d="M6.5 10.5C6.2 11.4 6 12.4 6 13.5"></path>
                        <path d="M15.5 6.5c-1.5 1.3-3.4 1.3-4.9 0"></path>
                    </svg>
                    <span class="text-2xl font-black text-white ml-2">QuizUp</span>
                </div>

                <!-- Menu -->
                <div class="relative">
                    <button onclick="toggleMenu()" class="p-2 rounded-md text-slate-400 hover:text-white hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                           <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-16 6h16"></path>
                        </svg>
                    </button>
                    <div id="menu-dropdown" class="absolute right-0 mt-2 w-56 duo-card p-2 hidden">
                        <div id="user-details-link" class="block px-4 py-2 text-sm text-slate-300 rounded-lg">
                            üë§ <span id="menu-username">User</span>
                        </div>
                        <a href="#leaderboard-list" onclick="scrollToLeaderboard()" class="block px-4 py-2 text-sm text-slate-300 hover:bg-slate-700/50 rounded-lg">üèÜ Leaderboard</a>
                        <a href="#" class="block px-4 py-2 text-sm text-slate-300 hover:bg-slate-700/50 rounded-lg">üìö Resources</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Welcome Popup -->
    <div id="welcome-popup" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
        <div class="duo-card text-center p-8 max-w-md w-full">
            <svg class="h-20 w-20 text-emerald-400 mx-auto mb-4" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7,7C7.56,7 8,7.44 8,8C8,8.56 7.56,9 7,9C6.44,9 6,8.56 6,8C6,7.44 6.44,7 7,7M12,7C12.56,7 13,7.44 13,8C13,8.56 12.56,9 12,9C11.44,9 11,8.56 11,8C11,7.44 11.44,7 12,7M17,7C17.56,7 18,7.44 18,8C18,8.56 17.56,9 17,9C16.44,9 16,8.56 16,8C16,7.44 16.44,7 17,7M12,14C9,14 6.5,12.5 5,11.75C5.5,15.25 8.5,18 12,18C15.5,18 18.5,15.25 19,11.75C17.5,12.5 15,14 12,14Z" />
            </svg>
            <h2 class="text-3xl duo-title mb-2">Welcome to QuizUp!</h2>
            <p class="text-slate-400 mb-6">Enter your name to join the Hall of Fame and start your learning journey!</p>
            <input type="text" id="username-input" placeholder="Enter your name..." class="w-full px-4 py-3 mb-6 rounded-lg bg-slate-700 text-slate-200 border-2 border-slate-600 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition">
            <button onclick="closeWelcomePopup()" class="duo-btn btn-green w-full text-lg">
                Start Learning
            </button>
        </div>
    </div>

    <div id="app-container" class="w-full max-w-5xl mx-auto">

        <!-- Home Screen -->
        <div id="home-screen">
            <header class="text-center mb-52">
                <h1 class="text-6xl md:text-7xl font-black">
                    <span class="bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-teal-400">Unlock Your Superpowers.</span>
                </h1>
                <p class="text-slate-400 mt-4 text-lg max-w-2xl mx-auto">The fun way to master skills! Conquer subjects with epic lessons and fun challenges.</p>
                <a href="#subjects-heading" onclick="event.preventDefault(); document.getElementById('subjects-heading').scrollIntoView({ behavior: 'smooth' });" class="duo-btn btn-green mt-8 inline-block text-xl">
                    Start Your Quest
                </a>
            </header>

            <main class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Main Column -->
                <div class="lg:col-span-2">
                    <h2 id="subjects-heading" class="text-3xl duo-title mb-4 px-2">Subjects</h2>
                    <div id="subjects-grid" class="space-y-4">
                        <!-- Subject cards will be injected here by JavaScript -->
                    </div>

                    <!-- Puzzles and Challenges Section -->
                    <div class="mt-12">
                         <h2 class="text-3xl duo-title mb-4 px-2">Puzzles & Challenges</h2>
                         <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <!-- Daily Riddle -->
                             <div onclick="showRiddleModal()" class="duo-card p-5 text-center cursor-pointer">
                                 <div class="text-4xl mb-2">ü§î</div>
                                 <h3 class="font-bold text-lg text-slate-200">Daily Riddle</h3>
                                 <p class="text-sm text-slate-400">A new riddle every day</p>
                             </div>
                             <!-- Brain Teaser -->
                             <div onclick="showTeaserModal()" class="duo-card p-5 text-center cursor-pointer">
                                 <div class="text-4xl mb-2">ü§Ø</div>
                                 <h3 class="font-bold text-lg text-slate-200">Brain Teaser</h3>
                                 <p class="text-sm text-slate-400">Test your logic</p>
                             </div>
                             <!-- Weekly Challenge -->
                             <div onclick="showChallengeModal()" class="duo-card p-5 text-center cursor-pointer">
                                <div class="text-4xl mb-2">üóìÔ∏è</div>
                                <h3 class="font-bold text-lg text-slate-200">Weekly Challenge</h3>
                                <p class="text-sm text-slate-400">A tough new puzzle</p>
                             </div>
                         </div>
                    </div>
                </div>

                <!-- Hall of Fame (Sidebar) -->
                <div class="lg:col-span-1">
                    <div class="duo-card p-6 sticky top-24">
                        <h2 class="text-2xl duo-title mb-4 flex items-center justify-center gap-2">üèÜ Hall of Fame</h2>
                        <ul id="leaderboard-list" class="space-y-3">
                            <!-- Leaderboard items will be injected here -->
                        </ul>
                    </div>
                </div>
            </main>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden w-full max-w-2xl mx-auto">
            <div class="duo-card p-6 sm:p-8">
                 <header class="mb-6">
                     <div class="flex justify-between items-center mb-2">
                         <h2 id="quiz-title" class="text-2xl font-bold text-slate-200">Quiz Title</h2>
                         <div id="lives-container" class="text-right text-red-400 font-bold text-lg flex items-center gap-1">
                            <!-- Lives will be injected here -->
                         </div>
                    </div>
                    <div class="overflow-hidden h-4 text-xs flex rounded-full bg-slate-700 border border-slate-600">
                        <div id="progress-bar" style="width: 0%" class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-gradient-to-r from-emerald-500 to-teal-500 transition-all duration-500"></div>
                    </div>
                 </header>
                
                <div class="my-8">
                    <p id="question-text" class="text-2xl sm:text-3xl font-bold leading-tight text-slate-100">This is where the question text will go.</p>
                </div>
                
                <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Option buttons will be injected here -->
                </div>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="hidden w-full max-w-2xl mx-auto">
             <div class="duo-card text-center p-8 sm:p-12">
                <div id="result-icon" class="text-6xl mb-4">üéâ</div>
                <h2 id="result-title" class="text-4xl font-black text-slate-100 mb-2">Quiz Complete!</h2>
                <p id="result-subtitle" class="text-lg text-slate-400 mb-6">You've finished the quiz.</p>
                <div class="mb-8 bg-slate-700/50 border-2 border-emerald-500 p-6 rounded-xl">
                    <p class="text-slate-300 text-lg font-bold">Your Final Score</p>
                    <p id="final-score" class="text-7xl font-black text-emerald-400">8/10</p>
                    <p id="score-percentage" class="text-2xl text-emerald-400 mt-1 font-bold">(80%)</p>
                </div>
                <div class="flex flex-col sm:flex-row-reverse gap-4">
                    <button onclick="goHome()" class="duo-btn btn-green w-full">
                        Continue
                    </button>
                    <button class="duo-btn w-full bg-slate-600 text-slate-400 border-slate-500 hover:bg-slate-500 opacity-60 cursor-not-allowed">Review Answers</button>
                </div>
            </div>
        </div>
        
        <!-- Video Modal -->
        <div id="video-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 hidden z-50">
             <div class="duo-card p-6 w-full max-w-3xl max-h-full overflow-y-auto">
                <div class="flex justify-between items-center mb-4">
                    <h2 id="video-modal-title" class="text-2xl duo-title">Learn</h2>
                    <button onclick="closeVideos()" class="text-3xl text-slate-400 hover:text-slate-200">&times;</button>
                </div>
                <div id="video-modal-content" class="space-y-4">
                    <!-- Video embeds will be injected here -->
                </div>
             </div>
        </div>
        
        <!-- Puzzle Modal -->
        <div id="puzzle-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 hidden z-50">
             <div class="duo-card p-6 w-full max-w-lg max-h-full overflow-y-auto text-center">
                <div class="flex justify-between items-center mb-4">
                    <h2 id="puzzle-modal-title" class="text-2xl duo-title">Puzzle</h2>
                    <button onclick="closePuzzleModal()" class="text-3xl text-slate-400 hover:text-slate-200">&times;</button>
                </div>
                <p id="puzzle-modal-text" class="text-xl text-slate-300 mb-6"></p>
                <div id="puzzle-modal-answer-container" class="hidden bg-slate-900/50 p-4 rounded-lg">
                     <p class="text-slate-400 mb-1 text-sm">Answer:</p>
                     <p id="puzzle-modal-answer" class="text-lg font-bold text-emerald-400"></p>
                </div>
                <button id="puzzle-reveal-btn" onclick="revealAnswer()" class="duo-btn btn-yellow w-full mt-6">Reveal Answer</button>
             </div>
        </div>

    </div>

    <script>
        // --- DATA ---
        const quizzes = {
            'java': {
                title: 'Java Language', icon: '‚òï',
                tagline: 'Build robust, platform-independent applications.',
                questions: [
                    { q: 'Which keyword is used for inheritance in Java?', options: ['extends', 'implements', 'inherits', 'super'], answer: 'extends' },
                    { q: 'What is the size of an int in Java?', options: ['2 bytes', '4 bytes', '8 bytes', 'Depends on JVM'], answer: '4 bytes' },
                    { q: 'Which of these is NOT a Java keyword?', options: ['final', 'static', 'unsigned', 'void'], answer: 'unsigned' },
                    { q: 'What does JVM stand for?', options: ['Java Virtual Machine', 'Java Visual Machine', 'Java Verified Machine', 'Just Virtual Machine'], answer: 'Java Virtual Machine' },
                    { q: 'Which collection class allows unique elements only?', options: ['ArrayList', 'HashMap', 'HashSet', 'LinkedList'], answer: 'HashSet' }
                ],
                videos: [ { title: "Java Full Course", id: "A74TOX803D0" }, { title: "Object-Oriented Programming", id: "pTB0EiLXUC8" } ]
            },
            'cpp': {
                title: 'C++ Language', icon: 'üîó',
                tagline: 'Harness the power of high-performance programming.',
                questions: [
                    { q: 'Which operator is used to access members of a struct using a pointer?', options: ['->', '.', '*', '&'], answer: '->' },
                    { q: 'What is the correct way to declare a pointer?', options: ['int &p;', 'int *p;', 'ptr p;', 'pointer p;'], answer: 'int *p;' },
                    { q: 'What does `std::vector` in C++ represent?', options: ['A static array', 'A dynamic array', 'A linked list', 'A queue'], answer: 'A dynamic array' },
                    { q: 'Which concept allows a class to have multiple methods with the same name?', options: ['Inheritance', 'Polymorphism', 'Encapsulation', 'Abstraction'], answer: 'Polymorphism' },
                    { q: 'The keyword `nullptr` was introduced in which C++ standard?', options: ['C++98', 'C++03', 'C++11', 'C++14'], answer: 'C++11' }
                ],
                videos: [ { title: "C++ Full Course for Beginners", id: "vLnPwxZdW4Y" }, { title: "Pointers in C++", id: "iChalAKXffs" } ]
            },
            'dbms': {
                title: 'Database Management', icon: 'üóÉÔ∏è',
                tagline: 'Organize, store, and retrieve data efficiently.',
                questions: [
                    { q: 'What does ACID stand for in DBMS?', options: ['Atomicity, Consistency, Isolation, Durability', 'Atomicity, Correctness, Integrity, Durability', 'Availability, Consistency, Isolation, Durability', 'Atomicity, Consistency, Integrity, Data'], answer: 'Atomicity, Consistency, Isolation, Durability' },
                    { q: 'Which normalization form deals with transitive dependency?', options: ['1NF', '2NF', '3NF', 'BCNF'], answer: '3NF' },
                    { q: 'Which of the following is NOT a DDL command?', options: ['CREATE', 'ALTER', 'TRUNCATE', 'UPDATE'], answer: 'UPDATE' },
                    { q: 'A primary key can contain NULL values.', options: ['True', 'False'], answer: 'False' },
                    { q: 'What is a foreign key?', options: ['A key to a foreign database', 'A key that uniquely identifies a row', 'A key used to link two tables together', 'A backup primary key'], answer: 'A key used to link two tables together' }
                ],
                videos: [ { title: "DBMS Full Course", id: "5OdVJbNCSso" }, { title: "Normalization Forms", id: "E-t_nK3f_Yw" } ]
            },
            'python': {
                title: 'Python Programming', icon: 'üêç',
                tagline: 'Master the versatile language of simplicity and power.',
                questions: [
                    { q: 'Which data type is immutable in Python?', options: ['List', 'Dictionary', 'Set', 'Tuple'], answer: 'Tuple' },
                    { q: 'What does the `//` operator do in Python?', options: ['Exponentiation', 'Floor Division', 'Standard Division', 'Modulo'], answer: 'Floor Division' },
                    { q: 'How do you start a single-line comment in Python?', options: ['//', '#', '/*', '--'], answer: '#' },
                    { q: 'Which function can be used to get the length of a list?', options: ['size()', 'length()', 'len()', 'count()'], answer: 'len()' },
                    { q: 'What is a list comprehension?', options: ['A way to create lists based on existing lists', 'A function to understand lists', 'A type of list that is compressed', 'A method to join lists'], answer: 'A way to create lists based on existing lists' }
                ],
                videos: [ { title: "Python Full Course for Beginners", id: "eWRfhZMgVBI" }, { title: "Data Structures in Python", id: "R_M3G3-qAqA" } ]
            },
            'ai': {
                title: 'Artificial Intelligence', icon: 'ü§ñ',
                tagline: 'Explore the frontier of intelligent machines.',
                questions: [
                    { q: 'Which of these is a type of supervised learning?', options: ['Clustering', 'Regression', 'Dimensionality Reduction', 'Association'], answer: 'Regression' },
                    { q: 'What does a "Turing Test" evaluate?', options: ['A machine\'s processing speed', 'A machine\'s ability to exhibit intelligent behavior', 'A machine\'s memory capacity', 'A machine\'s ability to perform complex math'], answer: 'A machine\'s ability to exhibit intelligent behavior' },
                    { q: 'What does NLP stand for?', options: ['Natural Language Processing', 'Neural Learning Protocol', 'New Logic Programming', 'Network Layer Protocol'], answer: 'Natural Language Processing' },
                    { q: 'A Neural Network is modeled after which biological structure?', options: ['The heart', 'The skeleton', 'The human brain', 'The lungs'], answer: 'The human brain' },
                    { q: 'What is "overfitting" in machine learning?', options: ['The model is too simple', 'The model performs well on new data', 'The model learns the training data too well', 'The model fails to train'], answer: 'The model learns the training data too well' }
                ],
                videos: [ { title: "What Is AI?", id: "2ePf9rue1Ao" }, { title: "Machine Learning Basics", id: "ukzFI9rgwfU" } ]
            },
            'swe': {
                title: 'Software Engineering', icon: '‚öôÔ∏è',
                tagline: 'Engineer elegant solutions to complex problems.',
                questions: [
                    { q: 'What is the first phase of the SDLC?', options: ['Design', 'Coding', 'Testing', 'Requirement Gathering'], answer: 'Requirement Gathering' },
                    { q: 'Which model is also known as the "waterfall model"?', options: ['Agile Model', 'Spiral Model', 'Linear-Sequential Model', 'V-Model'], answer: 'Linear-Sequential Model' },
                    { q: 'What is "Scrum" in the context of software development?', options: ['A type of testing', 'A programming language', 'An Agile framework', 'A design pattern'], answer: 'An Agile framework' },
                    { q: 'Which of these is a type of non-functional testing?', options: ['Unit Testing', 'Integration Testing', 'Performance Testing', 'System Testing'], answer: 'Performance Testing' },
                    { q: 'What is the purpose of a version control system like Git?', options: ['To compile code', 'To track changes in source code', 'To test software', 'To deploy applications'], answer: 'To track changes in source code' }
                ],
                videos: [ { title: "Software Engineering Full Course", id: "H4xxUdas_2Q" }, { title: "Agile vs Waterfall", id: "Z9QbYZh1Y1g" } ]
            },
            'sql': {
                title: 'SQL', icon: 'üìä',
                tagline: 'Unlock the stories hidden within your data.',
                questions: [
                    { q: 'Which SQL statement is used to extract data from a database?', options: ['GET', 'SELECT', 'EXTRACT', 'OPEN'], answer: 'SELECT' },
                    { q: 'Which type of JOIN returns all records from the left table, and the matched records from the right table?', options: ['INNER JOIN', 'RIGHT JOIN', 'FULL JOIN', 'LEFT JOIN'], answer: 'LEFT JOIN' },
                    { q: 'Which keyword is used to sort the result-set?', options: ['SORT BY', 'ORDER BY', 'ARRANGE BY', 'GROUP BY'], answer: 'ORDER BY' },
                    { q: 'What does the `COUNT(*)` function do?', options: ['Counts all columns', 'Counts all rows in a table', 'Calculates the sum of a column', 'Finds the average value'], answer: 'Counts all rows in a table' },
                    { q: 'The `WHERE` clause can be used with aggregate functions.', options: ['True', 'False'], answer: 'False' }
                ],
                videos: [ { title: "SQL Full Course", id: "HXV3zeQKqGY" }, { title: "SQL Joins Explained", id: "2yo2U-eKE4g" } ]
            },
            'cloud': {
                title: 'Cloud Computing', icon: '‚òÅÔ∏è',
                tagline: 'Leverage the power of scalable, on-demand computing.',
                questions: [
                    { q: 'What does IaaS stand for?', options: ['Internet as a Service', 'Infrastructure as a Service', 'Integration as a Service', 'Interface as a Service'], answer: 'Infrastructure as a Service' },
                    { q: 'Which service model provides a platform allowing customers to develop, run, and manage applications?', options: ['IaaS', 'PaaS', 'SaaS', 'FaaS'], answer: 'PaaS' },
                    { q: 'What is a "VPC" in the context of AWS?', options: ['Virtual Private Cloud', 'Virtual Processing Center', 'Variable Power Core', 'Visual Programming Console'], answer: 'Virtual Private Cloud' },
                    { q: '"Pay-as-you-go" pricing is a common feature of cloud computing.', options: ['True', 'False'], answer: 'True' },
                    { q: 'Which of the following is a major cloud provider?', options: ['Oracle', 'Microsoft Azure', 'SAP', 'VMware'], answer: 'Microsoft Azure' }
                ],
                videos: [ { title: "What is Cloud Computing?", id: "M988_fsOSWo" }, { title: "AWS Full Course", id: "ulprqHHWlng" } ]
            },
            'datascience': {
                title: 'Data Science', icon: 'üî¨',
                tagline: 'Turn raw data into meaningful insights.',
                questions: [
                    { q: 'Which Python library is commonly used for data manipulation and analysis?', options: ['NumPy', 'TensorFlow', 'Pandas', 'Matplotlib'], answer: 'Pandas' },
                    { q: 'Which chart is best for showing the relationship between two continuous variables?', options: ['Bar Chart', 'Pie Chart', 'Scatter Plot', 'Histogram'], answer: 'Scatter Plot' },
                    { q: 'What are the three main types of machine learning?', options: ['Supervised, Unsupervised, Reinforcement', 'Linear, Non-linear, Complex', 'Regression, Classification, Clustering', 'Deep, Shallow, Moderate'], answer: 'Supervised, Unsupervised, Reinforcement' },
                    { q: 'What is data cleaning?', options: ['Visualizing data', 'Deleting all data', 'The process of detecting and correcting corrupt or inaccurate records', 'Storing data in a database'], answer: 'The process of detecting and correcting corrupt or inaccurate records' },
                    { q: 'What is the main purpose of NumPy?', options: ['To create charts', 'To perform numerical operations, especially on arrays', 'To create web applications', 'To manage databases'], answer: 'To perform numerical operations, especially on arrays' }
                ],
                videos: [ { title: "Data Science Full Course", id: "X3paOmcrTjQ" }, { title: "Pandas Tutorial", id: "vmEHCJofslg" } ]
            },
            'cybersecurity': {
                title: 'Cyber Security', icon: 'üõ°Ô∏è',
                tagline: 'Protect digital systems from modern threats.',
                questions: [
                    { q: 'What is "phishing"?', options: ['A method of catching fish using technology', 'An attempt to obtain sensitive information by disguising as a trustworthy entity', 'A type of computer virus', 'A firewall technique'], answer: 'An attempt to obtain sensitive information by disguising as a trustworthy entity' },
                    { q: 'What does a firewall do?', options: ['Prevents computer from overheating', 'Monitors and filters incoming and outgoing network traffic', 'Scans for viruses', 'Speeds up internet connection'], answer: 'Monitors and filters incoming and outgoing network traffic' },
                    { q: 'What is malware?', options: ['Hardware that is malfunctioning', 'Software designed to disrupt, damage, or gain unauthorized access to a computer system', 'A secure type of software', 'A network security protocol'], answer: 'Software designed to disrupt, damage, or gain unauthorized access to a computer system' },
                    { q: 'A strong password should include:', options: ['Only lowercase letters', 'Your name and birthdate', 'A mix of upper/lowercase letters, numbers, and symbols', 'A common dictionary word'], answer: 'A mix of upper/lowercase letters, numbers, and symbols' },
                    { q: 'What is two-factor authentication (2FA)?', options: ['Two separate passwords', 'A security process requiring two different authentication methods', 'A type of encryption', 'A firewall setting'], answer: 'A security process requiring two different authentication methods' }
                ],
                videos: [ { title: "Cybersecurity Full Course", id: "U_P23SqJaDc" }, { title: "What is Phishing?", id: "YEXD4g2AM-k" } ]
            }
        };

        const dailyRiddles = [
            { puzzle: "I have cities, but no houses. I have mountains, but no trees. I have water, but no fish. What am I?", answer: "A map" },
            { puzzle: "What has an eye, but cannot see?", answer: "A needle" },
            { puzzle: "What is full of holes but still holds water?", answer: "A sponge" },
            { puzzle: "What question can you never answer yes to?", answer: "Are you asleep yet?" },
            { puzzle: "What is always in front of you but can‚Äôt be seen?", answer: "The future" }
        ];

        const brainTeasers = [
            { puzzle: "A man is looking at a portrait. Someone asks him whose portrait he is looking at. He replies, 'Brothers and sisters I have none, but that man's father is my father's son.' Who is in the portrait?", answer: "His son" },
            { puzzle: "I am an odd number. Take away a letter and I become even. What number am I?", answer: "Seven" },
            { puzzle: "What has to be broken before you can use it?", answer: "An egg" },
            { puzzle: "What is it that lives if it is fed, and dies if you give it a drink?", answer: "Fire" },
            { puzzle: "What word of five letters has one left when two are removed?", answer: "Stone" }
        ];

        const weeklyChallenges = [
            { puzzle: "You have two ropes that each take exactly one hour to burn from end to end. The ropes do not burn at a consistent rate. How can you measure exactly 45 minutes?", answer: "Light rope 1 on both ends and rope 2 on one end. Rope 1 will burn in 30 mins. When it does, light the other end of rope 2. Rope 2 will then burn its remaining half in 15 mins. Total time: 30 + 15 = 45 mins." },
            { puzzle: "There are three switches downstairs. Each corresponds to one of the three light bulbs in the attic. You can turn the switches on and off and leave them in any position. How would you go about determining which switch corresponds to which light bulb, if you are only allowed one trip upstairs?", answer: "Flip switch 1 on for a few minutes, then turn it off. Flip switch 2 on and leave it on. Go upstairs. The light that is on is switch 2. The bulb that is warm is switch 1. The cold, dark bulb is switch 3." },
            { puzzle: "You are in a room with two doors and two guards. One door leads to freedom, and one to death. One guard always tells the truth, and the other always lies. You can ask one guard one question to find the door to freedom. What question do you ask?", answer: "Ask either guard: 'Which door would the other guard tell me leads to freedom?' Then, choose the opposite door. The truth-teller would point to the death door (because the liar would lie), and the liar would also point to the death door (because the truth-teller would point to freedom, and the liar has to lie about that)." }
        ];

        let leaderboardData = [
            { name: "Pixel-Pioneer", score: 9850, avatar: "üöÄ" },
            { name: "Algo-Ace", score: 9700, avatar: "üß†" },
            { name: "Syntax-Sorcerer", score: 9550, avatar: "üßô" },
            { name: "Data-Dynamo", score: 9200, avatar: "‚ö°" },
            { name: "Cloud-Captain", score: 8900, avatar: "‚òÅÔ∏è" },
        ];

        // --- DOM ELEMENTS ---
        const welcomePopup = document.getElementById('welcome-popup');
        const homeScreen = document.getElementById('home-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        const videoModal = document.getElementById('video-modal');
        const puzzleModal = document.getElementById('puzzle-modal');
        const subjectsGrid = document.getElementById('subjects-grid');
        const leaderboardList = document.getElementById('leaderboard-list');
        const menuDropdown = document.getElementById('menu-dropdown');
        const menuUsername = document.getElementById('menu-username');

        const quizTitleEl = document.getElementById('quiz-title');
        const livesContainerEl = document.getElementById('lives-container');
        const progressBar = document.getElementById('progress-bar');
        const questionTextEl = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');

        const resultIconEl = document.getElementById('result-icon');
        const resultTitleEl = document.getElementById('result-title');
        const finalScoreEl = document.getElementById('final-score');
        const scorePercentageEl = document.getElementById('score-percentage');
        const resultSubtitleEl = document.getElementById('result-subtitle');
        
        const videoModalTitle = document.getElementById('video-modal-title');
        const videoModalContent = document.getElementById('video-modal-content');

        const puzzleModalTitle = document.getElementById('puzzle-modal-title');
        const puzzleModalText = document.getElementById('puzzle-modal-text');
        const puzzleModalAnswerContainer = document.getElementById('puzzle-modal-answer-container');
        const puzzleModalAnswer = document.getElementById('puzzle-modal-answer');
        const puzzleRevealBtn = document.getElementById('puzzle-reveal-btn');


        // --- APP STATE ---
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let score = 0;
        let lives = 0;
        let playerName = '';

        // --- HELPER FUNCTIONS ---
        const getDayOfYear = (date) => Math.floor((date - new Date(date.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);
        const getWeekNumber = (date) => {
            const firstDayOfYear = new Date(date.getFullYear(), 0, 1);
            const pastDaysOfYear = (date - firstDayOfYear) / 86400000;
            return Math.ceil((pastDaysOfYear + firstDayOfYear.getDay() + 1) / 7);
        };

        // --- FUNCTIONS ---
        
        function toggleMenu() {
            menuDropdown.classList.toggle('hidden');
        }

        function scrollToLeaderboard() {
            const leaderboardEl = document.getElementById('leaderboard-list');
            if (leaderboardEl) {
                leaderboardEl.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
            toggleMenu();
        }

        function closeWelcomePopup() {
            const nameInput = document.getElementById('username-input');
            playerName = nameInput.value.trim() || 'Player' + Math.floor(Math.random() * 1000);
            
            menuUsername.innerText = playerName;

            const existingPlayer = leaderboardData.find(p => p.name === playerName);
            if (!existingPlayer) {
                 leaderboardData.push({ name: playerName, score: 0, avatar: "üë§" });
            }
           
            displayLeaderboard();
            welcomePopup.classList.add('hidden');
        }
        
        function displayLeaderboard() {
            leaderboardData.sort((a, b) => b.score - a.score);

            leaderboardList.innerHTML = '';
            const medals = ['ü•á', 'ü•à', 'ü•â'];
            leaderboardData.forEach((player, index) => {
                const li = document.createElement('li');
                const isCurrentUser = player.name === playerName && playerName !== 'Anonymous';
                li.className = `flex items-center justify-between p-3 rounded-xl transition-colors ${isCurrentUser ? 'bg-emerald-500/20' : 'hover:bg-slate-700/50'}`;
                li.innerHTML = `
                    <div class="flex items-center gap-3">
                        <span class="text-lg font-bold w-6 text-slate-400">${medals[index] || index + 1}</span>
                        <span class="text-3xl">${player.avatar}</span>
                        <span class="font-bold text-slate-200">${player.name}</span>
                    </div>
                    <span class="font-bold text-slate-400">${player.score} XP</span>
                `;
                leaderboardList.appendChild(li);
            });
        }

        function initialize() {
            const subjectThemes = [
                { text: 'text-sky-400', bg: 'bg-sky-500', hoverBg: 'hover:bg-sky-600', shadow: '#0369a1' },
                { text: 'text-lime-400', bg: 'bg-lime-500', hoverBg: 'hover:bg-lime-600', shadow: '#4d7c0f' },
                { text: 'text-amber-400', bg: 'bg-amber-500', hoverBg: 'hover:bg-amber-600', shadow: '#b45309' },
                { text: 'text-violet-400', bg: 'bg-violet-500', hoverBg: 'hover:bg-violet-600', shadow: '#6d28d9' },
                { text: 'text-rose-400', bg: 'bg-rose-500', hoverBg: 'hover:bg-rose-600', shadow: '#be123c' },
                { text: 'text-teal-300', bg: 'bg-teal-500', hoverBg: 'hover:bg-teal-600', shadow: '#0f766e' },
                { text: 'text-orange-400', bg: 'bg-orange-500', hoverBg: 'hover:bg-orange-600', shadow: '#c2410c' },
                { text: 'text-cyan-400', bg: 'bg-cyan-500', hoverBg: 'hover:bg-cyan-600', shadow: '#0e7490' },
                { text: 'text-fuchsia-400', bg: 'bg-fuchsia-500', hoverBg: 'hover:bg-fuchsia-600', shadow: '#a21caf' },
                { text: 'text-green-400', bg: 'bg-green-500', hoverBg: 'hover:bg-green-600', shadow: '#15803d' }
            ];

            subjectsGrid.innerHTML = '';
            Object.keys(quizzes).forEach((key, index) => {
                const quiz = quizzes[key];
                const theme = subjectThemes[index % subjectThemes.length];
                const card = document.createElement('div');
                card.className = 'duo-card flex items-center justify-between p-5 cursor-pointer';
                card.innerHTML = `
                    <div class="flex items-center gap-5">
                        <div class="relative flex items-center justify-center">
                            <svg class="w-16 h-16 transform -rotate-90" viewBox="0 0 120 120">
                                <circle cx="60" cy="60" r="54" fill="none" stroke="#334155" stroke-width="8" />
                                <circle class="${theme.text}" cx="60" cy="60" r="54" fill="none" stroke="currentColor" stroke-width="8" stroke-dasharray="339.292" stroke-dashoffset="339.292" style="transition: stroke-dashoffset 0.5s;" />
                            </svg>
                            <span class="absolute text-4xl">${quiz.icon}</span>
                        </div>
                        <div>
                            <h3 class="font-bold text-xl ${theme.text} transition-all duration-200 hover:brightness-125">${quiz.title}</h3>
                            <p class="text-slate-400 text-sm">${quiz.tagline}</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <button onclick="event.stopPropagation(); showVideos('${key}')" class="duo-btn btn-blue flex items-center gap-2 text-xs sm:text-sm">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"></path></svg>
                            Learn
                        </button>
                        <button onclick="event.stopPropagation(); startQuiz('${key}')" class="duo-btn ${theme.bg} ${theme.hoverBg} text-white flex items-center gap-2 text-xs sm:text-sm" style="border-color: ${theme.shadow}; box-shadow: 0 4px ${theme.shadow};">
                             <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"></path><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd"></path></svg>
                            Start
                        </button>
                    </div>
                `;
                card.onclick = () => startQuiz(key);
                subjectsGrid.appendChild(card);
            });
            displayLeaderboard();
        }

        function startQuiz(quizKey) {
            currentQuiz = quizzes[quizKey];
            currentQuestionIndex = 0;
            score = 0;
            lives = 3; 

            homeScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');

            quizTitleEl.innerText = currentQuiz.title;
            livesContainerEl.innerHTML = '‚ù§Ô∏è <span id="lives">3</span>';
            
            displayQuestion();
        }
        
        function showVideos(quizKey) {
            const quiz = quizzes[quizKey];
            videoModalTitle.innerText = `Learn ${quiz.title}`;
            videoModalContent.innerHTML = '';
            
            quiz.videos.forEach(video => {
                const videoEl = document.createElement('div');
                videoEl.innerHTML = `
                    <h3 class="font-bold text-lg mb-2 text-slate-200">${video.title}</h3>
                    <div class="aspect-w-16 aspect-h-9 relative" style="padding-bottom: 56.25%;">
                        <iframe class="absolute top-0 left-0 w-full h-full rounded-lg" src="https://www.youtube.com/embed/${video.id}" title="${video.title}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                `;
                videoModalContent.appendChild(videoEl);
            });
            
            videoModal.classList.remove('hidden');
        }
        
        function closeVideos() {
            videoModalContent.innerHTML = ''; // Stop videos from playing in background
            videoModal.classList.add('hidden');
        }

        function displayQuestion() {
            const question = currentQuiz.questions[currentQuestionIndex];
            const totalQuestions = currentQuiz.questions.length;
            
            const progress = ((currentQuestionIndex) / totalQuestions) * 100;
            progressBar.style.width = `${progress}%`;

            questionTextEl.innerText = question.q;
            optionsContainer.innerHTML = '';

            // Shuffle options
            const shuffledOptions = [...question.options].sort(() => Math.random() - 0.5);

            shuffledOptions.forEach(option => {
                const button = document.createElement('button');
                button.className = 'duo-btn btn-option text-left w-full p-4 text-lg';
                button.innerText = option;
                button.onclick = () => selectAnswer(button, option, question.answer);
                optionsContainer.appendChild(button);
            });
        }
        
        function selectAnswer(button, selectedOption, correctAnswer) {
            const allOptions = optionsContainer.querySelectorAll('button');
            allOptions.forEach(btn => btn.disabled = true);

            if (selectedOption === correctAnswer) {
                score++;
                button.classList.add('correct', 'animate-pulse');
                proceedToNext(true);
            } else {
                lives--;
                const livesEl = document.getElementById('lives');
                if(livesEl) livesEl.innerText = lives;
                
                button.classList.add('incorrect', 'animate-shake');
                allOptions.forEach(btn => {
                    if (btn.innerText === correctAnswer) {
                        btn.classList.add('correct');
                    }
                });
                
                if (lives <= 0) {
                     setTimeout(showResults, 1500);
                } else {
                    proceedToNext(false);
                }
            }
        }

        function proceedToNext(wasCorrect) {
             setTimeout(() => {
                currentQuestionIndex++;
                if (currentQuestionIndex < currentQuiz.questions.length) {
                    displayQuestion();
                } else {
                    progressBar.style.width = `100%`;
                    showResults();
                }
            }, wasCorrect ? 1000 : 2000); // Shorter delay for correct answers
        }

        function showResults() {
            quizScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');

            const totalQuestions = currentQuiz.questions.length;
            const percentage = Math.round((score / totalQuestions) * 100);

            const player = leaderboardData.find(p => p.name === playerName);
            if (player) {
                player.score += (score * 10);
            }
            displayLeaderboard();

            finalScoreEl.innerText = `${score}/${totalQuestions}`;
            scorePercentageEl.innerText = `(${percentage}%)`;

            if (lives <= 0) {
                resultIconEl.innerText = "üíî";
                resultTitleEl.innerText = "Out of lives!";
                resultSubtitleEl.innerText = "Don't give up! Review the material and try again.";
            } else if (percentage === 100) {
                resultIconEl.innerText = "üèÜ";
                resultTitleEl.innerText = "Flawless Victory!";
                resultSubtitleEl.innerText = "You're an expert! Amazing job!";
            } else if (percentage >= 70) {
                resultIconEl.innerText = "üéâ";
                resultTitleEl.innerText = "Quiz Complete!";
                resultSubtitleEl.innerText = "Great job! You really know your stuff.";
            } else if (percentage >= 50) {
                resultIconEl.innerText = "üëç";
                resultTitleEl.innerText = "Well Done!";
                resultSubtitleEl.innerText = "Not bad! A little more practice and you'll be a pro.";
            } else {
                resultIconEl.innerText = "üìö";
                resultTitleEl.innerText = "Practice Makes Perfect";
                resultSubtitleEl.innerText = "Keep trying! Every master was once a beginner.";
            }
        }

        function goHome() {
            resultScreen.classList.add('hidden');
            homeScreen.classList.remove('hidden');
        }

        // --- Puzzle Functions ---
        function showRiddleModal() {
            const dayIndex = getDayOfYear(new Date()) % dailyRiddles.length;
            const riddle = dailyRiddles[dayIndex];
            puzzleModalTitle.innerText = 'ü§î Daily Riddle';
            puzzleModalText.innerText = riddle.puzzle;
            puzzleModalAnswer.innerText = riddle.answer;
            puzzleModal.classList.remove('hidden');
            resetPuzzleModal();
        }

        function showTeaserModal() {
            const dayIndex = getDayOfYear(new Date()) % brainTeasers.length;
            const teaser = brainTeasers[dayIndex];
            puzzleModalTitle.innerText = 'ü§Ø Brain Teaser';
            puzzleModalText.innerText = teaser.puzzle;
            puzzleModalAnswer.innerText = teaser.answer;
            puzzleModal.classList.remove('hidden');
            resetPuzzleModal();
        }

        function showChallengeModal() {
            const weekIndex = getWeekNumber(new Date()) % weeklyChallenges.length;
            const challenge = weeklyChallenges[weekIndex];
            puzzleModalTitle.innerText = 'üóìÔ∏è Weekly Challenge';
            puzzleModalText.innerText = challenge.puzzle;
            puzzleModalAnswer.innerText = challenge.answer;
            puzzleModal.classList.remove('hidden');
            resetPuzzleModal();
        }

        function closePuzzleModal() {
            puzzleModal.classList.add('hidden');
        }

        function resetPuzzleModal() {
            puzzleModalAnswerContainer.classList.add('hidden');
            puzzleRevealBtn.innerText = 'Reveal Answer';
            puzzleRevealBtn.disabled = false;
        }

        function revealAnswer() {
            puzzleModalAnswerContainer.classList.remove('hidden');
            puzzleRevealBtn.innerText = 'Answer Revealed';
            puzzleRevealBtn.disabled = true;
        }

        // Initial call to set up the app
        initialize();

        // Close menu if clicking outside
        window.addEventListener('click', function(e) {
            if (!document.getElementById('menu-dropdown').parentElement.contains(e.target)) {
                if (!menuDropdown.classList.contains('hidden')) {
                    menuDropdown.classList.add('hidden');
                }
            }
        });

    </script>
</body>
</html>










